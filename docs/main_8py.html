<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mech 405: Term Project: src/main.py File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Mech 405: Term Project<span id="projectnumber">&#160;0.0.0</span>
   </div>
   <div id="projectbrief">Create a dueling robot using a thermal camera,  two axis control,  and a scheduler.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('main_8py.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle"><div class="title">main.py File Reference</div></div>
</div><!--header-->
<div class="contents">

<p>This file manages the tasks in order to run the turret.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a56e24e039467f4e5a5ca68cf2a92b13c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8py.html#a56e24e039467f4e5a5ca68cf2a92b13c">main.buttonLogic</a> (pin)</td></tr>
<tr class="memdesc:a56e24e039467f4e5a5ca68cf2a92b13c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establishes global variable detecting button presses for use in FSM.  <br /></td></tr>
<tr class="separator:a56e24e039467f4e5a5ca68cf2a92b13c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7292f1319c6d98615b4a0639e7b436d9"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8py.html#a7292f1319c6d98615b4a0639e7b436d9">main.masterTask</a> (shares)</td></tr>
<tr class="memdesc:a7292f1319c6d98615b4a0639e7b436d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Establishes the FSM controlling all turret tasks and loops through it.  <br /></td></tr>
<tr class="separator:a7292f1319c6d98615b4a0639e7b436d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad170ef078b19476355119be652c19def"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8py.html#ad170ef078b19476355119be652c19def">main.yawTask</a> (shares)</td></tr>
<tr class="memdesc:ad170ef078b19476355119be652c19def"><td class="mdescLeft">&#160;</td><td class="mdescRight">Communicates with the closed loop controller responsible for yaw control.  <br /></td></tr>
<tr class="separator:ad170ef078b19476355119be652c19def"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac43371232343c3afb8a102819a45f767"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8py.html#ac43371232343c3afb8a102819a45f767">main.pitchTask</a> (shares)</td></tr>
<tr class="memdesc:ac43371232343c3afb8a102819a45f767"><td class="mdescLeft">&#160;</td><td class="mdescRight">Communicates with the closed loop controller responsible for pitch control.  <br /></td></tr>
<tr class="separator:ac43371232343c3afb8a102819a45f767"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac0aa8dd89aaebf183007266df72cbabf"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8py.html#ac0aa8dd89aaebf183007266df72cbabf">main.pictureTask</a> (shares)</td></tr>
<tr class="memdesc:ac0aa8dd89aaebf183007266df72cbabf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Communicates with the closed loop controllers responsible for yaw and pitch control, and calculates error in position from a thermal image.  <br /></td></tr>
<tr class="separator:ac0aa8dd89aaebf183007266df72cbabf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a95b9eaeb5862aea8fd747dd7dd243c94"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8py.html#a95b9eaeb5862aea8fd747dd7dd243c94">main.fireTask</a> (shares)</td></tr>
<tr class="memdesc:a95b9eaeb5862aea8fd747dd7dd243c94"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fires the turret.  <br /></td></tr>
<tr class="separator:a95b9eaeb5862aea8fd747dd7dd243c94"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="var-members" name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad24fa6b76fffc61bbae0f5d551459a59"><td class="memItemLeft" align="right" valign="top"><a id="ad24fa6b76fffc61bbae0f5d551459a59" name="ad24fa6b76fffc61bbae0f5d551459a59"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.buttonInt</b> = pyb.ExtInt(pyb.Pin.board.PC13, pyb.ExtInt.IRQ_FALLING, pyb.Pin.PULL_UP, buttonLogic)</td></tr>
<tr class="separator:ad24fa6b76fffc61bbae0f5d551459a59"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f0fed0c84c80a1f0632162fba14824d"><td class="memItemLeft" align="right" valign="top"><a id="a3f0fed0c84c80a1f0632162fba14824d" name="a3f0fed0c84c80a1f0632162fba14824d"></a>
I2C&#160;</td><td class="memItemRight" valign="bottom"><b>main.i2c_bus</b> = I2C(1)</td></tr>
<tr class="separator:a3f0fed0c84c80a1f0632162fba14824d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d70559af0a6ba9fcc2b474c0c18d357"><td class="memItemLeft" align="right" valign="top"><a id="a4d70559af0a6ba9fcc2b474c0c18d357" name="a4d70559af0a6ba9fcc2b474c0c18d357"></a>
MLX_Cam&#160;</td><td class="memItemRight" valign="bottom"><b>main.camera</b> = MLX_Cam(i2c_bus)</td></tr>
<tr class="separator:a4d70559af0a6ba9fcc2b474c0c18d357"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae534b294d19ae368d751b9c74d72800f"><td class="memItemLeft" align="right" valign="top"><a id="ae534b294d19ae368d751b9c74d72800f" name="ae534b294d19ae368d751b9c74d72800f"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinC1</b> = pyb.Pin(pyb.Pin.board.PC1, pyb.Pin.OUT_PP)</td></tr>
<tr class="separator:ae534b294d19ae368d751b9c74d72800f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b6916b8aa820d9dfe163eb04ab7b940"><td class="memItemLeft" align="right" valign="top"><a id="a4b6916b8aa820d9dfe163eb04ab7b940" name="a4b6916b8aa820d9dfe163eb04ab7b940"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinA0</b> = pyb.Pin(pyb.Pin.board.PA0, pyb.Pin.OUT_PP)</td></tr>
<tr class="separator:a4b6916b8aa820d9dfe163eb04ab7b940"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2c5afd9ad91f7c85a70d5105a977a698"><td class="memItemLeft" align="right" valign="top"><a id="a2c5afd9ad91f7c85a70d5105a977a698" name="a2c5afd9ad91f7c85a70d5105a977a698"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinA1</b> = pyb.Pin(pyb.Pin.board.PA1, pyb.Pin.OUT_PP)</td></tr>
<tr class="separator:a2c5afd9ad91f7c85a70d5105a977a698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a349846946618e865d38593144313be50"><td class="memItemLeft" align="right" valign="top"><a id="a349846946618e865d38593144313be50" name="a349846946618e865d38593144313be50"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.tim2</b> = 5</td></tr>
<tr class="separator:a349846946618e865d38593144313be50"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa11fd11aae322cf71a5ef7ae4deff8b5"><td class="memItemLeft" align="right" valign="top"><a id="aa11fd11aae322cf71a5ef7ae4deff8b5" name="aa11fd11aae322cf71a5ef7ae4deff8b5"></a>
MotorDriver&#160;</td><td class="memItemRight" valign="bottom"><b>main.moeY</b> = MotorDriver(pinC1,pinA0,pinA1,tim2)</td></tr>
<tr class="separator:aa11fd11aae322cf71a5ef7ae4deff8b5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fe7d2851196c4f600a7a3fbe2b55290"><td class="memItemLeft" align="right" valign="top"><a id="a7fe7d2851196c4f600a7a3fbe2b55290" name="a7fe7d2851196c4f600a7a3fbe2b55290"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinB6</b> = pyb.Pin(pyb.Pin.board.PB6, pyb.Pin.IN)</td></tr>
<tr class="separator:a7fe7d2851196c4f600a7a3fbe2b55290"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a768d18153f509881531f576a3cbd8a4f"><td class="memItemLeft" align="right" valign="top"><a id="a768d18153f509881531f576a3cbd8a4f" name="a768d18153f509881531f576a3cbd8a4f"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinB7</b> = pyb.Pin(pyb.Pin.board.PB7, pyb.Pin.IN)</td></tr>
<tr class="separator:a768d18153f509881531f576a3cbd8a4f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a14bcd74b1a47b5dbd06a2f97aaeb700c"><td class="memItemLeft" align="right" valign="top"><a id="a14bcd74b1a47b5dbd06a2f97aaeb700c" name="a14bcd74b1a47b5dbd06a2f97aaeb700c"></a>
EncoderReader&#160;</td><td class="memItemRight" valign="bottom"><b>main.encY</b> = EncoderReader(pinB6, pinB7, 4)</td></tr>
<tr class="separator:a14bcd74b1a47b5dbd06a2f97aaeb700c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b502e005c0b5b530bd3cfcb95570061"><td class="memItemLeft" align="right" valign="top"><a id="a4b502e005c0b5b530bd3cfcb95570061" name="a4b502e005c0b5b530bd3cfcb95570061"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinA10</b> = pyb.Pin(pyb.Pin.board.PA10, pyb.Pin.OUT_PP)</td></tr>
<tr class="separator:a4b502e005c0b5b530bd3cfcb95570061"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b7f136f471d2aad12825f1c107568e8"><td class="memItemLeft" align="right" valign="top"><a id="a9b7f136f471d2aad12825f1c107568e8" name="a9b7f136f471d2aad12825f1c107568e8"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinB4</b> = pyb.Pin(pyb.Pin.board.PB4, pyb.Pin.OUT_PP)</td></tr>
<tr class="separator:a9b7f136f471d2aad12825f1c107568e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acdd30a6c15eb58e849593ac44e754aca"><td class="memItemLeft" align="right" valign="top"><a id="acdd30a6c15eb58e849593ac44e754aca" name="acdd30a6c15eb58e849593ac44e754aca"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinB5</b> = pyb.Pin(pyb.Pin.board.PB5, pyb.Pin.OUT_PP)</td></tr>
<tr class="separator:acdd30a6c15eb58e849593ac44e754aca"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a749778a68d487a18cfaae377226207d6"><td class="memItemLeft" align="right" valign="top"><a id="a749778a68d487a18cfaae377226207d6" name="a749778a68d487a18cfaae377226207d6"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.tim1</b> = 3</td></tr>
<tr class="separator:a749778a68d487a18cfaae377226207d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6716aed95468742882a68cc550501ff2"><td class="memItemLeft" align="right" valign="top"><a id="a6716aed95468742882a68cc550501ff2" name="a6716aed95468742882a68cc550501ff2"></a>
MotorDriver&#160;</td><td class="memItemRight" valign="bottom"><b>main.moeP</b> = MotorDriver(pinA10,pinB4,pinB5,tim1)</td></tr>
<tr class="separator:a6716aed95468742882a68cc550501ff2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af832ab1c1ad4a1174673fd3558d1dd63"><td class="memItemLeft" align="right" valign="top"><a id="af832ab1c1ad4a1174673fd3558d1dd63" name="af832ab1c1ad4a1174673fd3558d1dd63"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinC6</b> = pyb.Pin(pyb.Pin.board.PC6, pyb.Pin.IN)</td></tr>
<tr class="separator:af832ab1c1ad4a1174673fd3558d1dd63"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37797afcd5ad8fe9af0b93e32fe3deeb"><td class="memItemLeft" align="right" valign="top"><a id="a37797afcd5ad8fe9af0b93e32fe3deeb" name="a37797afcd5ad8fe9af0b93e32fe3deeb"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinC7</b> = pyb.Pin(pyb.Pin.board.PC7, pyb.Pin.IN)</td></tr>
<tr class="separator:a37797afcd5ad8fe9af0b93e32fe3deeb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa19ddb407e5411a9cbc665701f9f35d9"><td class="memItemLeft" align="right" valign="top"><a id="aa19ddb407e5411a9cbc665701f9f35d9" name="aa19ddb407e5411a9cbc665701f9f35d9"></a>
EncoderReader&#160;</td><td class="memItemRight" valign="bottom"><b>main.encP</b> = EncoderReader(pinC6, pinC7, 8)</td></tr>
<tr class="separator:aa19ddb407e5411a9cbc665701f9f35d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a1d2ef0b814822a43fd264ccfef4ef5"><td class="memItemLeft" align="right" valign="top"><a id="a2a1d2ef0b814822a43fd264ccfef4ef5" name="a2a1d2ef0b814822a43fd264ccfef4ef5"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinB3</b> = pyb.Pin(pyb.Pin.board.PB3, pyb.Pin.OUT_PP)</td></tr>
<tr class="separator:a2a1d2ef0b814822a43fd264ccfef4ef5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a825cb5411e2a5f191cd38ac7030c89a5"><td class="memItemLeft" align="right" valign="top"><a id="a825cb5411e2a5f191cd38ac7030c89a5" name="a825cb5411e2a5f191cd38ac7030c89a5"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.tim</b> = pyb.Timer(2, prescaler = 79, period = 19999)</td></tr>
<tr class="separator:a825cb5411e2a5f191cd38ac7030c89a5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6bf91c696c4f3ee2180dde704e0a172"><td class="memItemLeft" align="right" valign="top"><a id="ae6bf91c696c4f3ee2180dde704e0a172" name="ae6bf91c696c4f3ee2180dde704e0a172"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.ch2</b> = tim.channel(2, pyb.Timer.PWM, pin=pinB3)</td></tr>
<tr class="separator:ae6bf91c696c4f3ee2180dde704e0a172"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44eef3fa88f1dcd4da4fcac68373cba6"><td class="memItemLeft" align="right" valign="top"><a id="a44eef3fa88f1dcd4da4fcac68373cba6" name="a44eef3fa88f1dcd4da4fcac68373cba6"></a>
utime&#160;</td><td class="memItemRight" valign="bottom"><b>main.zeroPoint</b> = utime.ticks_ms()</td></tr>
<tr class="separator:a44eef3fa88f1dcd4da4fcac68373cba6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6d1e12a1a4e6f76618e3717b3e901faa"><td class="memItemLeft" align="right" valign="top"><a id="a6d1e12a1a4e6f76618e3717b3e901faa" name="a6d1e12a1a4e6f76618e3717b3e901faa"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.trackPeriod</b> = 4900</td></tr>
<tr class="separator:a6d1e12a1a4e6f76618e3717b3e901faa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0688766444c460c16b2e7220d31def84"><td class="memItemLeft" align="right" valign="top"><a id="a0688766444c460c16b2e7220d31def84" name="a0688766444c460c16b2e7220d31def84"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.firePeriod</b> = 5000</td></tr>
<tr class="separator:a0688766444c460c16b2e7220d31def84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53cf3fb97d446efd8e68adcfe3acc63d"><td class="memItemLeft" align="right" valign="top"><a id="a53cf3fb97d446efd8e68adcfe3acc63d" name="a53cf3fb97d446efd8e68adcfe3acc63d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.idlePeriod</b> = 15000</td></tr>
<tr class="separator:a53cf3fb97d446efd8e68adcfe3acc63d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa6adbfa0075264c9eed057ae4b126c72"><td class="memItemLeft" align="right" valign="top"><a id="aa6adbfa0075264c9eed057ae4b126c72" name="aa6adbfa0075264c9eed057ae4b126c72"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinFlywheel</b> = pyb.Pin(pyb.Pin.board.PC0, pyb.Pin.OUT_PP)</td></tr>
<tr class="separator:aa6adbfa0075264c9eed057ae4b126c72"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a898de9607e5e5c5e582572cb31da5a7d"><td class="memItemLeft" align="right" valign="top"><a id="a898de9607e5e5c5e582572cb31da5a7d" name="a898de9607e5e5c5e582572cb31da5a7d"></a>
pyb&#160;</td><td class="memItemRight" valign="bottom"><b>main.pinA8</b> = pyb.Pin(pyb.Pin.board.PA8, pyb.Pin.OUT_PP)</td></tr>
<tr class="separator:a898de9607e5e5c5e582572cb31da5a7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a49c6b44041125a37b25d065c05f2d8eb"><td class="memItemLeft" align="right" valign="top"><a id="a49c6b44041125a37b25d065c05f2d8eb" name="a49c6b44041125a37b25d065c05f2d8eb"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.yawStartPos</b> = 18200</td></tr>
<tr class="separator:a49c6b44041125a37b25d065c05f2d8eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0d3238a4616e41f8a25349252e62241d"><td class="memItemLeft" align="right" valign="top"><a id="a0d3238a4616e41f8a25349252e62241d" name="a0d3238a4616e41f8a25349252e62241d"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.pitchStartPos</b> = 0</td></tr>
<tr class="separator:a0d3238a4616e41f8a25349252e62241d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a35f29caae6c20ae481af61bdaec644b3"><td class="memItemLeft" align="right" valign="top"><a id="a35f29caae6c20ae481af61bdaec644b3" name="a35f29caae6c20ae481af61bdaec644b3"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>main.buttonCounts</b> = 0</td></tr>
<tr class="separator:a35f29caae6c20ae481af61bdaec644b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4387f35c1e039962751180fa4bb9d6ef"><td class="memItemLeft" align="right" valign="top"><a id="a4387f35c1e039962751180fa4bb9d6ef" name="a4387f35c1e039962751180fa4bb9d6ef"></a>
task_share&#160;</td><td class="memItemRight" valign="bottom"><b>main.s_YawPos</b> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Yaw Position&quot;)</td></tr>
<tr class="separator:a4387f35c1e039962751180fa4bb9d6ef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acfb566c32ad0fab763371bed0667d160"><td class="memItemLeft" align="right" valign="top"><a id="acfb566c32ad0fab763371bed0667d160" name="acfb566c32ad0fab763371bed0667d160"></a>
task_share&#160;</td><td class="memItemRight" valign="bottom"><b>main.s_PitchPos</b> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('i', thread_protect=False, name=&quot;Pitch Position&quot;)</td></tr>
<tr class="separator:acfb566c32ad0fab763371bed0667d160"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9dda1947790ae56ad4af5e081c675d0f"><td class="memItemLeft" align="right" valign="top"><a id="a9dda1947790ae56ad4af5e081c675d0f" name="a9dda1947790ae56ad4af5e081c675d0f"></a>
task_share&#160;</td><td class="memItemRight" valign="bottom"><b>main.s_YawOnTarg</b> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('b', thread_protect=False, name=&quot;Yaw On Target&quot;)</td></tr>
<tr class="separator:a9dda1947790ae56ad4af5e081c675d0f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acff6a1652f2456272d2f61c876ec867b"><td class="memItemLeft" align="right" valign="top"><a id="acff6a1652f2456272d2f61c876ec867b" name="acff6a1652f2456272d2f61c876ec867b"></a>
task_share&#160;</td><td class="memItemRight" valign="bottom"><b>main.s_PitchOnTarg</b> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('b', thread_protect=False, name=&quot;Pitch On Target&quot;)</td></tr>
<tr class="separator:acff6a1652f2456272d2f61c876ec867b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a496cca3d199a5a3db4f251b5d5f81a3d"><td class="memItemLeft" align="right" valign="top"><a id="a496cca3d199a5a3db4f251b5d5f81a3d" name="a496cca3d199a5a3db4f251b5d5f81a3d"></a>
task_share&#160;</td><td class="memItemRight" valign="bottom"><b>main.s_TimeToTrack</b> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('b', thread_protect=False, name=&quot;Time To Track&quot;)</td></tr>
<tr class="separator:a496cca3d199a5a3db4f251b5d5f81a3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae727c86b4070976788bc01b5fd8413cc"><td class="memItemLeft" align="right" valign="top"><a id="ae727c86b4070976788bc01b5fd8413cc" name="ae727c86b4070976788bc01b5fd8413cc"></a>
task_share&#160;</td><td class="memItemRight" valign="bottom"><b>main.s_TimeToFire</b> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('b', thread_protect=False, name=&quot;Time To Fire&quot;)</td></tr>
<tr class="separator:ae727c86b4070976788bc01b5fd8413cc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a29037279cdb00e6afc3ee39dd7c1b678"><td class="memItemLeft" align="right" valign="top"><a id="a29037279cdb00e6afc3ee39dd7c1b678" name="a29037279cdb00e6afc3ee39dd7c1b678"></a>
task_share&#160;</td><td class="memItemRight" valign="bottom"><b>main.s_StopShooting</b> = <a class="el" href="classtask__share_1_1_share.html">task_share.Share</a>('b', thread_protect=False, name=&quot;Stop Shooting&quot;)</td></tr>
<tr class="separator:a29037279cdb00e6afc3ee39dd7c1b678"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1550fe10203477b8031a6d4b94e50944"><td class="memItemLeft" align="right" valign="top">cotask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8py.html#a1550fe10203477b8031a6d4b94e50944">main.task1</a></td></tr>
<tr class="separator:a1550fe10203477b8031a6d4b94e50944"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaba6cfdb6abf58fda13c27a38b8b9310"><td class="memItemLeft" align="right" valign="top">cotask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8py.html#aaba6cfdb6abf58fda13c27a38b8b9310">main.task2</a></td></tr>
<tr class="separator:aaba6cfdb6abf58fda13c27a38b8b9310"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a423da2f4a44af6d0b99d8a909cf21045"><td class="memItemLeft" align="right" valign="top">cotask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8py.html#a423da2f4a44af6d0b99d8a909cf21045">main.task3</a></td></tr>
<tr class="separator:a423da2f4a44af6d0b99d8a909cf21045"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac11856f0f317a306004f0d5095ebd95b"><td class="memItemLeft" align="right" valign="top">cotask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8py.html#ac11856f0f317a306004f0d5095ebd95b">main.task4</a></td></tr>
<tr class="separator:ac11856f0f317a306004f0d5095ebd95b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a69eea338e24b338b231232a082184fba"><td class="memItemLeft" align="right" valign="top">cotask&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8py.html#a69eea338e24b338b231232a082184fba">main.task5</a></td></tr>
<tr class="separator:a69eea338e24b338b231232a082184fba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a129bda823cbb62ffb698427de27e0d56"><td class="memItemLeft" align="right" valign="top"><a id="a129bda823cbb62ffb698427de27e0d56" name="a129bda823cbb62ffb698427de27e0d56"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>main.try</b> :</td></tr>
<tr class="separator:a129bda823cbb62ffb698427de27e0d56"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file manages the tasks in order to run the turret. </p>
<p>The motors are run using the code developed in the previous ME 405 labs.</p>
<dl class="section author"><dt>Author</dt><dd>mecha12 </dd></dl>
<dl class="section date"><dt>Date</dt><dd>11-Mar-2023 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a56e24e039467f4e5a5ca68cf2a92b13c" name="a56e24e039467f4e5a5ca68cf2a92b13c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a56e24e039467f4e5a5ca68cf2a92b13c">&#9670;&#160;</a></span>buttonLogic()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def main.buttonLogic </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>pin</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establishes global variable detecting button presses for use in FSM. </p>
<p>The global, 'buttoncounts' is initialized and incremented by 1 <br  />
 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin,the</td><td>pin on which the button resides, in this case C13 </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a95b9eaeb5862aea8fd747dd7dd243c94" name="a95b9eaeb5862aea8fd747dd7dd243c94"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a95b9eaeb5862aea8fd747dd7dd243c94">&#9670;&#160;</a></span>fireTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def main.fireTask </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shares</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fires the turret. </p>
<p>The task first checks that the button has been pressed, then waits 4.9 seconds before taking a picture. The flywheels spin up, and if the aiming error is low the servo is actuated to fire the turret. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shares,the</td><td>function managing the task sharing algorithm </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a7292f1319c6d98615b4a0639e7b436d9" name="a7292f1319c6d98615b4a0639e7b436d9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7292f1319c6d98615b4a0639e7b436d9">&#9670;&#160;</a></span>masterTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def main.masterTask </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shares</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Establishes the FSM controlling all turret tasks and loops through it. </p>
<p>Implemented as a generator function, the masterTask first initializes and clears all logical flags governing actions within the FSM. After this, the FSM is run through continuously, branching as necessary to the appropriate tasks. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shares,the</td><td>function managing the task sharing algorithm </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac0aa8dd89aaebf183007266df72cbabf" name="ac0aa8dd89aaebf183007266df72cbabf"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac0aa8dd89aaebf183007266df72cbabf">&#9670;&#160;</a></span>pictureTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def main.pictureTask </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shares</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Communicates with the closed loop controllers responsible for yaw and pitch control, and calculates error in position from a thermal image. </p>
<p>Implemented as a generator function, the pictureTask first takes an image, then uses the built-in findhottest() function to get the coordinates of the hottest pixel cluster. From this, the error in position of the turret is calculated and fed to the closed-loop controllers to move the turret to the desired position. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shares,the</td><td>function managing the task sharing algorithm </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac43371232343c3afb8a102819a45f767" name="ac43371232343c3afb8a102819a45f767"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac43371232343c3afb8a102819a45f767">&#9670;&#160;</a></span>pitchTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def main.pitchTask </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shares</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Communicates with the closed loop controller responsible for pitch control. </p>
<p>Implemented as a generator function, the pitchTask first initializes the closed loop controller with an initial Kp, then reads from the encoder, calculates the error, and sends this back to the closed loop controller. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shares,the</td><td>function managing the task sharing algorithm </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad170ef078b19476355119be652c19def" name="ad170ef078b19476355119be652c19def"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad170ef078b19476355119be652c19def">&#9670;&#160;</a></span>yawTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def main.yawTask </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>shares</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Communicates with the closed loop controller responsible for yaw control. </p>
<p>Implemented as a generator function, the yawTask first initializes the closed loop controller with an initial Kp, then reads from the encoder, calculates the error, and sends this back to the closed loop controller. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">shares,the</td><td>function managing the task sharing algorithm </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a1550fe10203477b8031a6d4b94e50944" name="a1550fe10203477b8031a6d4b94e50944"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1550fe10203477b8031a6d4b94e50944">&#9670;&#160;</a></span>task1</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cotask main.task1</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classcotask_1_1_task.html">cotask.Task</a>(masterTask, name=<span class="stringliteral">&quot;Master Task&quot;</span>, priority=1, period=0,</div>
<div class="line"><span class="lineno">    2</span>                        profile=<span class="keyword">True</span>, trace=<span class="keyword">True</span>, shares=(s_YawPos, s_PitchPos, s_YawOnTarg, s_PitchOnTarg, s_TimeToTrack, s_TimeToFire, s_StopShooting))</div>
<div class="ttc" id="aclasscotask_1_1_task_html"><div class="ttname"><a href="classcotask_1_1_task.html">cotask.Task</a></div><div class="ttdoc">Implements multitasking with scheduling and some performance logging.</div><div class="ttdef"><b>Definition:</b> cotask.py:36</div></div>
</div><!-- fragment -->
</div>
</div>
<a id="aaba6cfdb6abf58fda13c27a38b8b9310" name="aaba6cfdb6abf58fda13c27a38b8b9310"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaba6cfdb6abf58fda13c27a38b8b9310">&#9670;&#160;</a></span>task2</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cotask main.task2</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classcotask_1_1_task.html">cotask.Task</a>(yawTask, name=<span class="stringliteral">&quot;Yaw Task&quot;</span>, priority=2, period=40,</div>
<div class="line"><span class="lineno">    2</span>                        profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>, shares=(s_YawPos, s_PitchPos, s_YawOnTarg, s_PitchOnTarg, s_TimeToTrack, s_TimeToFire, s_StopShooting))</div>
</div><!-- fragment -->
</div>
</div>
<a id="a423da2f4a44af6d0b99d8a909cf21045" name="a423da2f4a44af6d0b99d8a909cf21045"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a423da2f4a44af6d0b99d8a909cf21045">&#9670;&#160;</a></span>task3</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cotask main.task3</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classcotask_1_1_task.html">cotask.Task</a>(pitchTask, name=<span class="stringliteral">&quot;Pitch Task&quot;</span>, priority=3, period=40,</div>
<div class="line"><span class="lineno">    2</span>                        profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>, shares=(s_YawPos, s_PitchPos, s_YawOnTarg, s_PitchOnTarg, s_TimeToTrack, s_TimeToFire, s_StopShooting))</div>
</div><!-- fragment -->
</div>
</div>
<a id="ac11856f0f317a306004f0d5095ebd95b" name="ac11856f0f317a306004f0d5095ebd95b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac11856f0f317a306004f0d5095ebd95b">&#9670;&#160;</a></span>task4</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cotask main.task4</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classcotask_1_1_task.html">cotask.Task</a>(pictureTask, name=<span class="stringliteral">&quot;Picture Task&quot;</span>, priority=5, period=500,</div>
<div class="line"><span class="lineno">    2</span>                        profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>, shares=(s_YawPos, s_PitchPos, s_YawOnTarg, s_PitchOnTarg, s_TimeToTrack, s_TimeToFire, s_StopShooting))</div>
</div><!-- fragment -->
</div>
</div>
<a id="a69eea338e24b338b231232a082184fba" name="a69eea338e24b338b231232a082184fba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a69eea338e24b338b231232a082184fba">&#9670;&#160;</a></span>task5</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">cotask main.task5</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line"><span class="lineno">    1</span>=  <a class="code hl_class" href="classcotask_1_1_task.html">cotask.Task</a>(fireTask, name=<span class="stringliteral">&quot;Fire Task&quot;</span>, priority=4, period=100,</div>
<div class="line"><span class="lineno">    2</span>                        profile=<span class="keyword">True</span>, trace=<span class="keyword">False</span>, shares=(s_YawPos, s_PitchPos, s_YawOnTarg, s_PitchOnTarg, s_TimeToTrack, s_TimeToFire, s_StopShooting))</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="main_8py.html">main.py</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
