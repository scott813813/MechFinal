<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.6"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Mech 405: Term Project: ME405 Term Project</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Mech 405: Term Project<span id="projectnumber">&#160;0.0.0</span>
   </div>
   <div id="projectbrief">Create a dueling robot using a thermal camera,  two axis control,  and a scheduler.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.6 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(document).ready(function(){initNavTree('index.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<div><div class="header">
  <div class="headertitle"><div class="title">ME405 Term Project </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>mecha12</dd></dl>
<h1><a class="anchor" id="Design"></a>
Software Design</h1>
<p>The dueling robot uses a set of tasks to run and target an opponent succesfully. The robot uses MicroPython to control two motors and adjust the pitch and yaw axis in order to follow the target found in the provided thermal camera. Once the target is located and tracked, the motor engages the flywheels and servo motor to propel a dart forward.</p>
<h2><a class="anchor" id="mainFile"></a>
main</h2>
<p>The <a class="el" href="main_8py.html" title="This file manages the tasks in order to run the turret.">main.py</a> file uses a task management file to manage the yaw, pitch, camera and firing tasks. The task diagram of the file is below.</p>
<p>Reference: </p><div class="image">
<img src="Task_Diagram.jpg" alt="" width="800px"/>
</div>
<h3><a class="anchor" id="Master_Task"></a>
Master Task</h3>
<p>The master task shares the current turret status with all other tasks. When the master task is initilized it moves into the it's state 1, where it sends the pitch and yaw motors to move to their initial positions. It next waits until 4.9 seconds, in which it will then send a signal to the motors to begin following the target based on the position data sent by the camera task, and for the flywheels to begin spinning up. Once 5 seconds has been reached, if the yaw and pitch motors are both on target, fire the dart by articulating the servo motor. Once the ten second firing window passes, powerdown the flywheels and send the yaw motor back to its starting position.</p>
<p>Reference: </p><div class="image">
<img src="Master_Task_FSM.jpg" alt="" width="800px"/>
</div>
<h3><a class="anchor" id="Yaw_Task"></a>
Yaw Task</h3>
<p>The yaw task takes the current horizontal position and uses the control loop developed in lab 2 to try to aim at the target. If Yaw Task is at the same position as the target, then the target is located in the horizontal axis and the Yaw Task shares Y_OnTarg to high to the Firing Task.</p>
<h3><a class="anchor" id="Pitch_Task"></a>
Pitch Task</h3>
<p>The pitch task takes the current vertical position and uses the control loop developed in lab 2 to try to aim at the target. If Pitch Task is at the same position of the target, then the target is located in the vertical axis and the Pitch Task shares P_OnTarg to high to the Firing Task.</p>
<h3><a class="anchor" id="Camera_Task"></a>
Camera Task</h3>
<p>The camera task queues the location of the target in its field of view with both the Yaw Axis Controller and the Pitch Axis Controller. It utilizes a an algorithm that 'splits' the 32 by 24 pixel grid into an 8 by 24 grid of 'arrays' (effectively splits them as so, but not technically). It then compares the average heat value of each split array to find the maximum and returns its x and y location relative to the center axis of the screen.</p>
<h3><a class="anchor" id="Firing_Task"></a>
Firing Task</h3>
<p>The firing task takes the data shared by both the Yaw Task and the Pitch Task in the form of the two booleans: Y_OnTarg and P_On_Targ respectively. If both booleans are True then the firing task commands the servo motor to articulate a dart into the rotating flywheels.</p>
<p>Reference: </p><div class="image">
<img src="Fire_Task_FSM.jpg" alt="" width="800px"/>
</div>
<h2><a class="anchor" id="camFile"></a>
mlx_cam</h2>
<p>The <a class="el" href="mlx__cam_8py.html" title="RAW VERSION This version uses a stripped down MLX90640 driver which produces only raw data,...">mlx_cam.py</a> file is used to take images through the provided IR camera. This file then returns the x and y components of the target.</p>
<h2><a class="anchor" id="motorFile"></a>
motor_driver</h2>
<p>The <a class="el" href="motor__driver_8py.html" title="This file contains code to run the motor.">motor_driver.py</a> file manages the PWM signal sent to the provided motor in order to position the motor at the desired location.</p>
<h2><a class="anchor" id="encoderReaderFile"></a>
encoder_reader</h2>
<p>The <a class="el" href="encoder__reader_8py.html" title="This file contains code which computes the reading from the encoder in order to evaluate the speed of...">encoder_reader.py</a> file reads and tracks the inputed motor's encoder and returns the value.</p>
<h2><a class="anchor" id="closedLoopFile"></a>
closed_loop_control</h2>
<p>The <a class="el" href="closed__loop__control_8py.html" title="This file contains code which controls the motors position by taking the proportional gain constant,...">closed_loop_control.py</a> file uses runs a closed loop controller on the inputed motor to assist in positioning the motor.</p>
<h2><a class="anchor" id="costaskFile"></a>
cotask</h2>
<p>The <a class="el" href="cotask_8py.html" title="This file contains classes to run cooperatively scheduled tasks in a multitasking system.">cotask.py</a> file is one of the two behind the scenes task management files which assist <a class="el" href="main_8py.html" title="This file manages the tasks in order to run the turret.">main.py</a> in running. It specifically assists with helping tasks run after each other.</p>
<h2><a class="anchor" id="task_shareFile"></a>
task_share</h2>
<p>The <a class="el" href="task__share_8py.html" title="This file contains classes which allow tasks to share data without the risk of data corruption by int...">task_share.py</a> file is one of the two behind the scenes task management files which assist <a class="el" href="main_8py.html" title="This file manages the tasks in order to run the turret.">main.py</a> in running. It specifically assists with sharing data with each task. </p>
</div></div><!-- PageDoc -->
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.6 </li>
  </ul>
</div>
</body>
</html>
